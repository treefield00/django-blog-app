{% extends 'blog/base.html' %}

{% block content %}
    <div class="row">
        <div class="col-9">
            {% if category %}
            <h1>{{category}}<i>-category-</i></h1>
            <hr>
            {% elif tag %}
            <h1>#{{tag}}</h1>
            <hr>
            {% endif %}
            
            {% for post in posts %}
            {% if post.is_published or user.is_authenticated %}
            
            {% if not post.is_published %}
            <span class="badge bg-danger">下書き</span>
            {% endif %}
            
                <h2>{{post.title}}</h2>
                <p>{{post.content|truncatechars:30}}</p>
                <p>{{post.created_at}}{{post.updated_at}}</p>
                <p><a href="{% url 'post-detail' post.pk %}">続きを読む＞＞</a></p>
            {% endif %}
            {% endfor %}
        </div>
        <div class="col-3">
            <div class="p-4">
                <h4>カテゴリー</h4>
                <ul class="list-group list-group-flush">
                    {% for category in categories %}
                    {% if category.count > 0 %}
                    <li class="list-group-item">
                        <a href="{% url 'category-post-list' category.slug %}">
                            {{category.name}}({{category.count}})
                        </a>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
            <div class="p-4">
                <h4>タグ</h4>
                {% for tag in tags %}
                    <a class="btn btn-light bg-light text-dark m-1" href="{% url 'tag-post-list' tag.slug %}">
                        {{tag.name}}
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>



{% endblock content %}